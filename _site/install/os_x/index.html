
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Installing SMART on OS X</title>
    
    <meta name="author" content="SMART Platforms">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/themes/twitter-2.0/css/pygments.css" rel="stylesheet">
    <link href="/assets/themes/twitter-2.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter-2.0/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter-2.0/css/style.css" rel="stylesheet">
  </head>
  <body>
   <div class="container">
      <div class="content">
        

<section id="jekyll-page">
  <div class="row">

    <div class="span4">
      <a href="/">
        <img id='smart_top_logo' src="/images/smart.png"/>
      </a>
      
        <div id="left_nav">
  <ul class="nav nav-list">
    <li class="nav-header">Tutorials</li>
    <li><a href="/howto/build_a_smart_app">Build a SMART App</a></li>
    <li><a href="/howto/build_a_rest_app">Build a SMART REST App</a></li>
    <li><a href="/howto/build_smart_frame_ui_apps">Frame UI Apps</a></li>
    <li><a href="/howto/got_statins">Got Statins? App</a></li>

    <li class="nav-header">Using SMART Data</li>

    <li><a href="/howto/intro_to_rdf">Intro to RDF and SPARQL</a></li>
    <li><a href="/howto/sparql_examples">SPARQL Examples for SMART</a></li>
    <li><a href="/howto/intro_to_jsonld">Intro to the JSON-LD API</a></li>
    <li><a href="/howto/filters">Query Filtering and Pagination</a></li>
    <li><a href="/howto/deferred">$.Deferred for Parallel Queries</a></li>
    <li><a href="/howto/smart_data">SMART Data: Best Practices</a></li>

    <li class="nav-header">Reference</li>

    <li><a href="/reference/data_model">Data Model</a></li>
    <li><a href="/reference/rest_api">REST API</a></li>
    <li><a href="/reference/filters">Query Filters</a></li>
    <li><a href="/reference/app_manifest">App Manifest</a></li>
    <li><a href="/reference/oauth">OAuth</a></li>

    <li class="nav-header">Client Libraries</li>

    <li><a href="/libraries/javascript">Javascript (SMART Connect)</a></li>
    <li><a href="/libraries/python">Python</a></li>
    <li><a href="https://github.com/chb/SMARTFramework-ios">iOS</a></li>
    <li><a href="/libraries/java">Java</a></li>
    <li><a href="/libraries/dotnet">.NET</a></li>
    <li><a href="/libraries/container_javascript">Container-side Javascript</a></li>

    <li class="nav-header">SMART Update Guides</li>

    <li><a href="/updates/smart_0.6/">0.6 Apps + Containers</a></li>
    <li><a href="/updates/smart_0.5/">0.5 Apps + Containers</a></li>
    <li><a href="/updates/smart_0.4/app">0.4 Apps</a></li>
    <li><a href="/updates/smart_0.4/container">0.4 Containers</a></li>

    <li class="nav-header">Reference EMR Installation</li>

    <li><a href="/install/linux">Ubuntu Linux</a></li>
    <li><a href="/install/os_x">OS X</a></li>

    <li class="nav-header">Presentations</li>

    <li><a href="http://www.slideshare.net/jmandel/2010-0826smartarchitecture">Architecture (2010-08)</a></li>
    <li><a href="http://www.slideshare.net/jmandel/2010-08-26-smart-governance">Governance (2010-08)</a></li>

    <li class="nav-header">Downloads</li>
    <li><a href="/downloads/">Download Source + VM</a></li>
  </ul>
</div>

      
    </div>

    <div class="span8" id="jekyll-page-content">
      <div class="page-header">
        <h1>Installing SMART on OS X <small></small></h1>
      </div>

      <div class='simple_small_box'>Help us improve! You can correct errors or add to this page by clicking
<a class='githublink' href=''>here</a> to edit this page on Github.
</div>

<p>This walks you through installing an <em>insecure SMART testing environment</em> on
Mac OS X. We will be installing everything needed for SMART into the directory
<code>/Library/SMART</code>, all the instructions assume that you are running a Terminal
open from this location. Of course you can use your own location, just remember
to return to your <code>SMART</code> directory. Tested on OS X Lion and Mountain Lion.</p>

<h1>Install Homebrew</h1>

<p>We use <a href="http://mxcl.github.com/homebrew/">Homebrew</a> as package manager to install most libraries. Since this
needs some extra command line tools to compile code, you first have to do
<em>one</em> of the following:</p>

<ul>
<li><p>Install <a href="http://itunes.apple.com/ch/app/xcode/id497799835?l=en&amp;mt=12">Xcode</a> from the App Store (it&#39;s free, if large), then open
<code>Xcode &gt; Preferences &gt; Downloads &gt; Components</code> and install the <code>Command Line
Tools</code></p></li>
<li><p>Download only the <a href="https://developer.apple.com/downloads/index.action">Command Line Tools</a> (search for the correct version) from
the Apple Developer Center (you will need a free developer account for this)</p></li>
</ul>

<p><a href="http://mxcl.github.com/homebrew/">Homebrew</a> is a superb replacement for the old managers Fink and MacPorts and
you will love it! Here&#39;s a one-line installer for it:</p>
<div class="highlight"><pre><code class="text">$ /usr/bin/ruby -e &quot;$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)&quot;
</code></pre></div>
<p>If you had Homebrew installed before, make sure to update it:</p>
<div class="highlight"><pre><code class="text">$ brew update
</code></pre></div>
<h1>Install Django and Python Tools</h1>

<p>We have to use <a href="https://www.djangoproject.com/download/">Django 1.3</a> for now. You will see a lot of warnings from clang that you can safely ignore.</p>
<div class="highlight"><pre><code class="text">$ sudo easy_install django==1.3.2
$ sudo easy_install lxml, psycopg2
$ sudo easy_install -U rdflib rdfextras jsonschema httplib2
</code></pre></div>
<p>At the time of this writing, this will install Django <code>1.3.2</code>, lxml <code>3.1.0</code>, psycopg <code>2.4.6</code>, rdflib <code>3.4.0</code>, rdfextras <code>0.4</code> and jsonschema <code>1.1</code>. Those versions all work well, if you are having trouble with newer versions you want to specify which version to install.</p>

<h1>PostgreSQL</h1>

<p>OS X 10.8 ships with PostgreSQL including a launchd-item, but I was out of luck finding its data directory. So we...</p>

<ul>
<li><p>Install postgres with homebrew (installs version 9.2.3):</p>

<p>$ brew install postgresql
  $ initdb /usr/local/var/postgres -E utf8
  $ cp /usr/local/Cellar/postgresql/9.2.3/homebrew.mxcl.postgresql.plist \
    ~/Library/LaunchAgents/</p></li>
<li><p>Launch Postgres</p>

<p>$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist</p></li>
<li><p>Because of some socket issues we must symlink the socket from its default in <code>/tmp</code> to <code>/var/pgsql_socket</code>. Both are needed and I haven&#39;t been able to figure out why. First, create the directory and make it yours:</p>

<p>$ sudo mkdir /var/pgsql_socket
  $ sudo chown <code>whoami</code>:admin /var/pgsql_socket/
  $ ln -s /tmp/.s.PGSQL.5432 /var/pgsql_socket/.s.PGSQL.5432</p>

<blockquote>
<p>If you know how to circumvent this, let us know!</p>
</blockquote></li>
<li><p>Create a PostgreSQL user for your SMART service. We will be using <em>smart</em>,
use your own password:</p>
<div class="highlight"><pre><code class="text">$ createuser --superuser smart
$ psql postgres
$ postgres=# \password smart
$ postgres=# \q
</code></pre></div></li>
</ul>

<blockquote>
<p><strong>Caveat</strong>: When using Postgres &lt; 9.1 see the <a href="https://github.com/chb/smart_server">instructions</a> on how to change
the Postgres config to use md5 passwords.</p>
</blockquote>

<h1>Tomcat and openrdf-sesame</h1>

<ul>
<li><p>Install Tomcat</p>

<p>$ brew install tomcat</p></li>
<li><p>Configure Tomcat: The environment variable <em>$CATALINA_HOME</em> needs to point
to the tomcat base directory. So in your Bash <code>.profile</code> add:</p>

<p>$ export CATALINA_HOME=/usr/local/Cellar/tomcat/7.0.32/libexec</p>

<p>If brew didn&#39;t install version 7.0.32, change that number accordingly. If you don&#39;t use Bash adjust accordingly. Reload your profile file with:</p>

<p>$ source ~/.profile</p></li>
<li><p>Install openrdf-sesame</p>

<p>$ curl -O <a href="http://freefr.dl.sourceforge.net/project/sesame/Sesame%202/2.6.5/openrdf-sesame-2.6.5-sdk.tar.gz">http://freefr.dl.sourceforge.net/project/sesame/Sesame%202/2.6.5/openrdf-sesame-2.6.5-sdk.tar.gz</a>
  $ tar -xzvf openrdf-sesame-2.6.5-sdk.tar.gz
  $ mkdir $CATALINA_HOME/.aduna
  $ mkdir $CATALINA_HOME/logs
  $ cp -r openrdf-sesame-2.6.5/war/* $CATALINA_HOME/webapps/</p></li>
<li><p>Launch Tomcat and check its availability</p>

<p>$ $CATALINA_HOME/bin/startup.sh</p></li>
</ul>

<p>You should now be able to access <code>http://localhost:8080/openrdf-workbench/</code></p>

<blockquote>
<p>OS X no longer ships with <strong>Java</strong> installed. Tomcat runs on Java, so if you haven&#39;t installed Java yet simply type <code>java</code> in the Terminal and the OS will prompt and install Java for you.</p>
</blockquote>

<h1>Automated SMART install</h1>

<p>We&#39;re now ready to get the latest and greatest from SMART.</p>

<ul>
<li><p>Download the SMART manager</p>
<div class="highlight"><pre><code class="text">$ curl -O https://raw.github.com/chb/smart_server/master/load_tools/smart_manager.py
</code></pre></div></li>
<li><p>Run the manager. This will install the current <code>master</code> branch of all SMART
repositories that we need. If you want the bleeding edge <code>dev</code> version, add a
<code>-d</code> switch to the following command</p>
<div class="highlight"><pre><code class="text">$ python smart_manager.py -a
</code></pre></div></li>
</ul>

<p>This will fetch all needed repositories, run an installer that asks you for some configurations, generate patient sample data and in the end run the server.</p>

<h2>The reset script</h2>

<p>If you didn&#39;t run the automated install, mostly because you had an old SMART version around already, you might want to use the script <code>smart_server/reset.sh</code> to recreate your Postgres databases.</p>

<blockquote>
<p>This drops the current database, so all data will be lost!</p>
</blockquote>

<h1>Running SMART</h1>

<p>If you&#39;ve just run the automated install, you only need to start Tomcat via
<code>$CATALINA_HOME/bin/startup.sh</code>, in the future:</p>

<h2>To start SMART (and Tomcat):</h2>
<div class="highlight"><pre><code class="text">$ $CATALINA_HOME/bin/startup.sh
$ python smart_manager.py -v -w
</code></pre></div>
<h2>To stop SMART (and Tomcat):</h2>
<div class="highlight"><pre><code class="text">$ python smart_manager.py -k
$ $CATALINA_HOME/bin/shutdown.sh
</code></pre></div>
<p>Nobody is stopping you from putting these two commands in a start- and/or stop
script, of course. :)</p>


    </div>
  </div>
</section>


      </div>

      <footer>
        <div>
          <a href='http://smartplatforms.org'>SMART Platforms</a> &copy; 2013
        </div>
      </footer>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/twitter-2.0/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/twitter-2.0/js/bootstrap_aks.js"></script>
    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33617191-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



    <script src="/assets/app.js?v=0.1"></script>
    <script>Toc.init($("#jekyll-page-content"), $("#toc"));</script>
  </body>
</html>

