
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SMART API Filters and Pagination</title>
    
    <meta name="author" content="SMART Platforms">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/themes/twitter-2.0/css/pygments.css" rel="stylesheet">
    <link href="/assets/themes/twitter-2.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter-2.0/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter-2.0/css/style.css" rel="stylesheet">
  </head>
  <body>
   <div class="container">
      <div class="content">
        

<section id="jekyll-page">
  <div class="row">

    <div class="span4">
      <a href="/">
        <img id='smart_top_logo' src="/images/smart.png"/>
      </a>
      
        <div id="left_nav">
  <ul class="nav nav-list">
    <li class="nav-header">Tutorials</li>
    <li><a href="/howto/build_a_smart_app">Build a SMART App</a></li>
    <li><a href="/howto/build_a_rest_app">Build a SMART REST App</a></li>
    <li><a href="/howto/build_smart_frame_ui_apps">Frame UI Apps</a></li>
    <li><a href="/howto/got_statins">Got Statins? App</a></li>

    <li class="nav-header">Using SMART Data</li>

    <li><a href="/howto/intro_to_rdf">Intro to RDF and SPARQL</a></li>
    <li><a href="/howto/sparql_examples">SPARQL Examples for SMART</a></li>
    <li><a href="/howto/intro_to_jsonld">Intro to the JSON-LD API</a></li>
    <li><a href="/howto/filters">Query Filtering and Pagination</a></li>
    <li><a href="/howto/deferred">$.Deferred for Parallel Queries</a></li>
    <li><a href="/howto/smart_data">SMART Data: Best Practices</a></li>

    <li class="nav-header">Reference</li>

    <li><a href="/reference/data_model">Data Model</a></li>
    <li><a href="/reference/rest_api">REST API</a></li>
    <li><a href="/reference/filters">Query Filters</a></li>
    <li><a href="/reference/app_manifest">App Manifest</a></li>
    <li><a href="/reference/oauth">OAuth</a></li>
    <li><a href="/reference/preferences_scratchpad">Preferences and Scratchpad APIs</a></li>

    <li class="nav-header">Client Libraries</li>

    <li><a href="/libraries/javascript">Javascript (SMART Connect)</a></li>
    <li><a href="/libraries/python">Python</a></li>
    <li><a href="https://github.com/chb/SMARTFramework-ios">iOS</a></li>
    <li><a href="/libraries/java">Java</a></li>
    <li><a href="/libraries/dotnet">.NET</a></li>
    <li><a href="/libraries/container_javascript">Container-side Javascript</a></li>

    <li class="nav-header">SMART Update Guides</li>

    <li><a href="/updates/smart_0.6/">0.6 Apps + Containers</a></li>
    <li><a href="/updates/smart_0.5/">0.5 Apps + Containers</a></li>
    <li><a href="/updates/smart_0.4/app">0.4 Apps</a></li>
    <li><a href="/updates/smart_0.4/container">0.4 Containers</a></li>

    <li class="nav-header">Reference EMR Installation</li>

    <li><a href="/install/linux">Ubuntu Linux</a></li>
    <li><a href="/install/os_x">OS X</a></li>

    <li class="nav-header">Presentations</li>

    <li><a href="http://www.slideshare.net/jmandel/2010-0826smartarchitecture">Architecture (2010-08)</a></li>
    <li><a href="http://www.slideshare.net/jmandel/2010-08-26-smart-governance">Governance (2010-08)</a></li>

    <li class="nav-header">Downloads</li>
    <li><a href="/downloads/">Download Source + VM</a></li>
  </ul>
</div>

      
    </div>

    <div class="span8" id="jekyll-page-content">
      <div class="page-header">
        <h1>SMART API Filters and Pagination <small></small></h1>
      </div>

      <div class='simple_box'>
  Help us improve! You can correct errors or add to this page by clicking
<a class='githublink' href=''>here</a> to edit this page on Github.

</div>

<div id="toc"></div>

<p>The SMART API offers a basic filtering capability to narrow down large
clinical statement result sets on the server before returning data to
the client. As of SMART 0.6, for all API calls that return multiple
SMART Clinical Statements (e.g. <code>GET /records/xxx/lab_results</code>), you can
attach date filters if relevant to the returned data type, and in a few
select cases other datatype specific filters (such as LOINC codes on lab
results) as URL parameters.</p>

<h1>Common Date Filters</h1>

<p>All SMART API calls for clinical statements that have a <code>date</code> or
<code>startDate</code> attribute can now be filtered on those attributes by sending
the following query parameters in the request.</p>

<p>Note: even if the data includes an <code>endDate</code>, it is not used by any of
the current filters.</p>

<ul>
<li><code>date_from</code></li>
<li><code>date_from_excluding</code></li>
<li><code>date_from_including</code></li>
<li><code>date_to</code></li>
<li><code>date_to_excluding</code></li>
<li><code>date_to_including</code></li>
</ul>

<h1>Statement Specific Filters</h1>

<p>The following calls have additional filters:</p>

<h2><a href="/reference/data_model/#Lab_Result">Lab Results</a></h2>

<p><code>loinc</code>: a pipe-separated LOINC codes. e.g. <code>loinc=29571-7|38478-4</code></p>

<h2><a href="/reference/data_model/#Vital_Sign_Set">Vital Sign Sets</a></h2>

<p><code>encounter_type</code>: pipe-separated encounter types. e.g. <code>encounter_type=ambulatory</code></p>

<h2><a href="/reference/data_model/#Medication">Medications</a></h2>

<p><code>rxnorm</code>: a pipe-separated list of RXNORM codes. e.g. <code>rxnorm=856845</code></p>

<h2><a href="/reference/data_model/#Problem">Problems</a></h2>

<p><code>snomed</code>: a pipe-seperated list of SNOMED codes. e.g. <code>snomed=161891005i</code></p>

<h2><a href="/reference/data_model/#Procedure">Procedures</a></h2>

<p><code>snomed</code>: a pipe-seperated list of SNOMED codes. e.g. <code>snomed=161891005</code></p>

<h1>The Default Sort Order and Paginating Results</h1>

<p>Each SMART API call that returns sets of Clinical Statements now have a
default sort order defined for them based on either the <code>date</code> or
<code>startDate</code> attribute. The previously defined <code>offset</code> parameter has
been removed. This requires a change in an app&#39;s pagination strategy to
use date filters, the <code>limit</code> parameter, and the metadata in the
<code>ResponseSummary</code> to paginate results.  See
also <code>resultsReturned</code> and <code>totalResultCount</code> in the <code>ResponseSummary</code>
object in the next section.</p>

<p>The default behavior of any call is to return all results, if no limit
is supplied in the request.</p>

<h1>Response Summary</h1>

<p>To complement the filtering and pagination API, each query response
includes a <code>api:ResponseSummary</code>. e.g.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;rdf:Description rdf:nodeID=&quot;Naa3f4ca7b6024d6ab616aa31fa5ab528&quot;&gt;
    &lt;api:processingTimeMs rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#integer&quot;&gt;19&lt;/api:processingTimeMs&gt;
    &lt;rdf:type rdf:resource=&quot;http://smartplatforms.org/terms/api#ResponseSummary&quot;/&gt;
    &lt;api:resultsReturned rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#integer&quot;&gt;2&lt;/api:resultsReturned&gt;
    &lt;api:totalResultCount rdf:datatype=&quot;http://www.w3.org/2001/XMLSchema#integer&quot;&gt;2&lt;/api:totalResultCount&gt;
    &lt;api:resultOrder rdf:nodeID=&quot;Nff3cac65263543dfa82450b51355c031&quot;/&gt;
  &lt;/rdf:Description&gt;
</code></pre></div>

    </div>
  </div>
</section>


      </div>

      <footer>
        <div>
          <a href='http://smartplatforms.org'>SMART Platforms</a> &copy; 2013
        </div>
      </footer>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/twitter-2.0/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/twitter-2.0/js/bootstrap_aks.js"></script>
    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33617191-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



    <script src="/assets/app.js?v=0.1"></script>
    <script>Toc.init($("#jekyll-page-content"), $("#toc"));</script>
  </body>
</html>

